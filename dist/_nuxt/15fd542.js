(window.webpackJsonp=window.webpackJsonp||[]).push([[159,110,120,122],{1281:function(t,e,n){"use strict";n(846)},1282:function(t,e,n){var r=n(19)((function(i){return i[1]}));r.push([t.i,"*[data-v-184063c8] .el-dialog{width:416px!important;max-width:95%!important;border-radius:8px!important;position:relative!important;overflow:hidden}*[data-v-184063c8] .el-dialog__header{padding-bottom:20px}*[data-v-184063c8] .el-dialog__footer,*[data-v-184063c8] .el-dialog__header{text-align:left!important}*[data-v-184063c8] .el-dialog__body{background:#fcfcfd}*[data-v-184063c8] .el-select .el-input__inner{padding-top:0!important;padding-bottom:0!important}",""]),r.locals={},t.exports=r},1307:function(t,e,n){"use strict";n.r(e);n(38),n(37),n(45),n(59),n(30),n(60);var r=n(15),o=n(3),l=(n(21),n(9),n(0)),c=n(144),d=(n(95),n(789),n(653)),h=(n(256),n(663),n(695),n(4),n(145));function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m=l.default.extend({name:"SavePdfModal",components:{SpinnerDottedIcon:c.default},model:{prop:"visible",event:"updateVisibility"},props:{visible:{type:Boolean,default:!1},file:{type:Object,default:function(){return{}}},download:{type:Function},canvasHeight:{},pdfContainerDimension:{type:Object}},data:function(){return{showModal:!1,errorMessage:"",loading:!1,newSaveData:{},file:{},sendAction:null}},watch:{visible:function(t){this.showModal=t},showModal:function(t){this.$emit("updateVisibility",t)}},mounted:function(){this.showModal=this.visible},computed:{isCreated:function(){return this.file.userId==this.$auth.user.id},confirmFile:function(){return this.file.fileAction==h.a.CONFIRM&&!this.isCreated},completeFile:function(){return this.file.fileAction==h.a.COMPLETE&&!this.isCreated},signFile:function(){return this.file.fileAction==h.a.SIGNED&&!this.isCreated}},methods:{sendToEmail:function(t){var e=this,n={fileId:this.file.id,editedFileLink:t.downloadLink};this.signFile?(n.action="sign",this.sendAction=h.a.SIGNED):this.completeFile?(n.action="complete",this.sendAction=h.a.COMPLETE):this.confirmFile?(n.action="confirm",this.sendAction=h.a.CONFIRM):(n.action="save",this.sendAction="saved"),console.log(n),this.$axios.$post("/request",n).then((function(t){e.$notify.success({title:"File",message:"File ".concat(e.sendAction)})})).catch((function(){e.$notify.error({title:"File",message:"File not sent"})}))},closeModal:function(){this.$emit("updateVisibility",!1)},saveByCreator:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(n=x({},t.file)).user,delete n.updated_at,delete n.created_at,e.next=6,t.$axios.$post("/pdf-generator",x({},t.newSaveData)).then((function(e){t.sendToEmail(e),t.closeModal()})).catch((function(e){Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$notify.error({title:"File",message:"Error saving file"});case 2:case"end":return e.stop()}}),e)})))()})).finally((function(){t.loading=!1}));case 6:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t;null===(t=event)||void 0===t||t.preventDefault(),this.loading||(this.loading=!0,this.errorMessage="",this.newSaveData=x({},Object(d.ExtractFormPdf)(this.file.downloadLink)[0]),console.log(x({},this.newSaveData),Object(d.ExtractFormPdf)(this.file.downloadLink)[1]),this.saveByCreator())}}}),y=(n(1281),n(1)),component=Object(y.a)(m,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-dialog",{staticClass:"relative text-[#414042]",attrs:{visible:t.showModal,"append-to-body":!0,"show-close":!1,center:""},on:{"update:visible":function(e){t.showModal=e}},scopedSlots:t._u([{key:"title",fn:function(){return[e("h4",{staticClass:"text-center font-semibold text-xl"},[t._v("Are you sure?")])]},proxy:!0}])},[e("div",{staticClass:"absolute -top-3 -right-3",staticStyle:{padding:"inherit"}},[e("span",{staticClass:"circle circle-12 bg-white cursor-pointer text-red-600",on:{click:function(e){return t.closeModal()}}},[e("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 3.19188L7.02451 0.167368C7.24767 -0.0557892 7.60948 -0.0557892 7.83263 0.167368C8.05579 0.390524 8.05579 0.752333 7.83263 0.975489L4.80812 4L7.83263 7.02451C8.05579 7.24767 8.05579 7.60948 7.83263 7.83263C7.60948 8.05579 7.24767 8.05579 7.02451 7.83263L4 4.80812L0.975489 7.83263C0.752333 8.05579 0.390524 8.05579 0.167368 7.83263C-0.0557892 7.60948 -0.0557892 7.24767 0.167368 7.02451L3.19188 4L0.167368 0.975489C-0.0557892 0.752333 -0.0557892 0.390524 0.167368 0.167368C0.390524 -0.0557892 0.752333 -0.0557892 0.975489 0.167368L4 3.19188Z",fill:"#414042"}})])])]),t._v(" "),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"text-center font-medium max-w-[300px] mx-auto mb-6 whitespace-normal"},[t._v("\n    You've not done any changes yet! Do you still want to exit the file?\n  ")]),t._v(" "),e("div",{staticClass:"flex justify-around"},[e("button",{staticClass:"disabled:bg-opacity-50 disabled:cursor-not-allowed h-10 text-xs w-[150px] max-w-[50%] text-red-600 border border-red-600 rounded-lg shadow bg-white",attrs:{type:"button",disabled:t.loading},on:{click:function(e){return t.closeModal()}}},[t._v("\n      Cancel\n    ")]),t._v(" "),e("button",{staticClass:"disabled:bg-opacity-50 disabled:cursor-progress h-10 text-xs w-[150px] max-w-[50%] text-white rounded-lg shadow bg-paperdazgreen-400",attrs:{disabled:t.loading},on:{click:t.onSubmit}},[e("span",{staticClass:"inline-flex gap-1 items-center"},[t._v("\n        Yes\n        "),e("spinner-dotted-icon",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"animate-spin",attrs:{height:"20",width:"20"}})],1)])])])}),[],!1,null,"184063c8",null);e.default=component.exports},653:function(t,e,n){"use strict";n.r(e),n.d(e,"formatStyleTop",(function(){return c})),n.d(e,"appendEditText",(function(){return h})),n.d(e,"appendEditTextInput",(function(){return f})),n.d(e,"appendEditElement",(function(){return x})),n.d(e,"appendUserActionElement",(function(){return m})),n.d(e,"appendEditImage",(function(){return y})),n.d(e,"appendDefaultConfirmSign",(function(){return v})),n.d(e,"appendDefaultConfirmText",(function(){return w})),n.d(e,"ExtractFormPdf",(function(){return A}));n(371),n(658),n(370),n(69),n(23),n(9),n(30),n(372),n(31);var r=n(145),o=n(671),l=n.n(o),c=function(t,e){var n=e.substring(e.indexOf(t)+t.length+1,e.indexOf("px"));return parseFloat(n.trim())},d=function(t,e){var n=e.substring(e.indexOf(t)+t.length+1,e.lastIndexOf("px"));return parseFloat(n.trim())},h=function(t){var e=t.parent,n=t.subParent,r=t.attr,o=t.tools,l=t.elem,h=t.axisX,f=t.axisY,x=t.fontsize;e.data.push({page_number:n.indexOf(l),y:c("top",r),x:d("left",r),type:"DrawText",text:o,axisX:h[1]-h[0],axisY:f[1]>f[0]?f[1]-f[0]:f[0]-f[1],size:c("font-size",x)})},f=function(t,e,n,r,o,l){t.data.push({page_number:e.indexOf(o),y:c("top",n),x:d("left",n),type:"DrawText",text:r,size:Number(c("font-size",l))})},x=function(t){var e=t.parent,n=t.subParent,r=t.attr,o=t.tools,option=t.option,l=t.elem,h=t.x1,f=t.y1,x=t.y2,m=t.x2,y=t.type,v=t.axisX,w=t.axisY,A=t.length,C=t.svgImagePath,O=t.svgWidth,R=t.svgHeight,P=t.elemScale;e.data.push({page_number:n.indexOf(l),y:parseFloat(f)||c("top",r),x:parseFloat(h)||d("left",r),svgPath:o,axisX:v[1]-v[0],axisY:w[1]>w[0]?w[1]-w[0]:w[0]-w[1],type:y||"Annotation",option:option,elemScale:P,length:A,y2:Number(x),x2:Number(m),svgImagePath:C,svgWidth:O,svgHeight:R})},m=function(t){var e=t.parent,n=t.subParent,r=t.attr,option=t.option,o=t.elem,l=t.x1,h=t.y1,f=(t.type,t.tool),x=t.axisX,m=t.axisY,y=t.axisX2,v=t.axisY2,w=t.pdfHeight,A=t.pdfWidth,C=t.height,O=t.actionStore,R=t.uploaded;e.data.push({page_number:n.indexOf(o),y:parseFloat(h)||c("top",r),x:parseFloat(l)||d("left",r),type:"Image",uploaded:R,axisX:x[1]-x[0],axisY:m[1]>m[0]?m[1]-m[0]:m[0]-m[1],axisX2:y[1]-y[0],axisY2:v[1]-v[0],base64:f.children[0].src,width:f.children[0].clientWidth,height:f.children[0].clientHeight}),O.push({page_number:n.indexOf(o),y:parseFloat(h)||c("top",r),x:parseFloat(l)||d("left",r),type:"appendHtmlElement",axisX:x[1]-x[0],axisY:m[1]>m[0]?m[1]-m[0]:m[0]-m[1],title:option,pdfHeight:w,pdfWidth:A,height:C})},y=function(t){var e=t.parent,n=t.subParent,r=t.attr,o=t.tools,l=t.elem,option=t.option,h=t.x1,f=t.y1,x=t.axisX,m=t.axisY,y=t.width,v=t.height,w=t.axisX2,A=t.axisY2,C=t.scaleDiff;e.data.push({page_number:n.indexOf(l),y:(parseFloat(f)||c("top",r))+.27*parseFloat(y)/2,x:(parseFloat(h)||d("left",r))+.27*parseFloat(v)/2,base64:o,type:"Image",option:option,axisX:x[1]-x[0],axisX2:w[1]-w[0],axisY2:A[1]-A[0],axisY:m[1]>m[0]?m[1]-m[0]:m[0]-m[1],elemScale:C,width:.73*parseFloat(y),height:.73*parseFloat(v)})},v=function(t){var e=t.parent,n=t.subParent,r=t.signaturePath,o=t.elem,option=t.option;t.type;e.data.push({page_number:n.indexOf(o),signaturePath:r,option:option,type:"confirm"})},w=function(t){var e=t.parent,n=t.subParent,text=t.text,r=t.elem,option=t.option;t.type;e.data.push({page_number:n.indexOf(r),text:text,option:option,type:"confirm"}),console.log(text)},A=function(t,e){var n={pdf_url:t||"",pdfWidth:null,pdfHeight:null,data:[]},o=[],c=document.querySelectorAll(".pdf-single-page-outer"),d=document.querySelectorAll(".pdf-page"),f=Array.from(c);n.pdfHeight="CANVAS"==d[0].children[0].tagName?d[0].children[0].getBoundingClientRect().height:d[0].children[1].getBoundingClientRect().height,n.pdfWidth="CANVAS"==d[0].children[0].tagName?d[0].children[0].getBoundingClientRect().width:d[0].children[1].getBoundingClientRect().width,f.forEach((function(element){(e||{}).fileAction==r.a.CONFIRM&&(v({parent:n,subParent:f,signaturePath:e.signaturePath,elem:element,option:"sign"}),w({parent:n,subParent:f,text:String(e.text).trim(),elem:element,option:"text"})),element.children.length>1&&Array.from(element.children).forEach((function(t){t.classList.contains("tool-wrapper")&&Array.from((t.children[1]||t.children[0]).children).forEach((function(e){var r;switch(e.tagName){case"svg":x({parent:n,subParent:f,attr:t.getAttribute("style"),tools:e.children[0].getAttribute("d"),option:e.children[0].getAttribute("options"),elemScale:e.getAttribute("elemscale"),elem:element,type:e.children[0].getAttribute("type"),axisY:[element.getBoundingClientRect().top,t.getBoundingClientRect().top],axisX:[element.getBoundingClientRect().left,t.getBoundingClientRect().left],length:t.getBoundingClientRect().width,svgImagePath:e.children[0].getAttribute("svgToImage"),svgWidth:e.getBoundingClientRect().width,svgHeight:e.getBoundingClientRect().height,y2:e.children[0].getAttribute("y2")?e.children[0].getAttribute("y2"):null,x2:e.children[0].getAttribute("x2")?e.children[0].getAttribute("x2"):null,x1:e.children[0].getAttribute("x")?e.children[0].getAttribute("x"):null,y1:e.children[0].getAttribute("y")?e.children[0].getAttribute("y"):null});break;case"BUTTON":m({parent:n,subParent:f,attr:t.getAttribute("style"),option:e.getAttribute("attr"),uploaded:e.getAttribute("uploaded"),elem:element,tool:e,axisY:[element.getBoundingClientRect().top,t.children[0].children[0].children[0].getBoundingClientRect().top],height:t.getBoundingClientRect().height,axisX:[element.getBoundingClientRect().left,t.children[0].children[0].children[0].getBoundingClientRect().left],axisX2:[t.children[0].children[0].children[0].getBoundingClientRect().left,t.children[0].children[0].children[0].getBoundingClientRect().right],axisY2:[t.children[0].children[0].children[0].getBoundingClientRect().top,t.children[0].children[0].children[0].getBoundingClientRect().bottom],pdfHeight:n.pdfHeight,pdfWidth:n.pdfWidth,x1:e.children[0].getAttribute("x")?e.children[0].getAttribute("x"):null,y1:e.children[0].getAttribute("y")?e.children[0].getAttribute("y"):null,type:e.children[0].getAttribute("type"),actionStore:o});break;case"DIV":switch(null===(r=e.children[0])||void 0===r?void 0:r.tagName){case"svg":x({parent:n,subParent:f,attr:t.getAttribute("style"),elemScale:e.getAttribute("elemscale"),tools:e.children[0].children[0].getAttribute("d"),option:e.children[0].children[0].getAttribute("options"),elem:element,axisY:[element.getBoundingClientRect().top,t.getBoundingClientRect().top],axisX:[element.getBoundingClientRect().left,t.getBoundingClientRect().left],length:e.children[0].children[0].getAttribute("x")?e.children[0].children[0].getAttribute("x"):null,y2:e.children[0].children[0].getAttribute("y2")?e.children[0].children[0].getAttribute("y2"):null,x1:e.children[0].children[0].getAttribute("x")?e.children[0].children[0].getAttribute("x"):null,y1:e.children[0].children[0].getAttribute("y")?e.children[0].children[0].getAttribute("y"):null,type:e.children[0].children[0].getAttribute("type")});break;case"P":h({parent:n,subParent:f,axisY:[element.getBoundingClientRect().top,t.getBoundingClientRect().top],axisX:[element.getBoundingClientRect().left,t.getBoundingClientRect().left],attr:t.getAttribute("style"),tools:e.children[0].textContent,elem:element,fontsize:e.children[0].getAttribute("style")});break;case"IMG":y({parent:n,subParent:f,attr:t.getAttribute("style"),elemScale:e.getAttribute("elemscale"),tools:e.children[0].src,scaleDiff:e.children[0].getAttribute("scaleDiff"),elem:element,axisY:[element.getBoundingClientRect().top,t.getBoundingClientRect().top],axisY2:[t.getBoundingClientRect().top,t.getBoundingClientRect().bottom],axisX:[element.getBoundingClientRect().left,t.getBoundingClientRect().left],axisX2:[t.getBoundingClientRect().left,t.getBoundingClientRect().right],width:e.children[0].getBoundingClientRect().width,height:e.children[0].getBoundingClientRect().height})}break;default:console.log("it is default"+e.tagName)}}))}))}));var A=document.querySelectorAll(".pdf-page");return Array.from(A).forEach((function(element){Array.from(element.children).forEach((function(t){if(t.classList.contains("annotationLayer")){var e=l()(".annotationLayer").find(":input");Array.from(e).forEach((function(t){switch(console.log(t.type),t.type){case"text":n.data.push({type:"PDFTextField",fieldName:t.name,value:t.value});break;case"checkbox":n.data.push({type:"PDFCheckBox",fieldName:t.name,isCheck:t.checked});break;case"select-one":n.data.push({type:"PDFDropdown",fieldName:t.name,value:t.value});break;case"radio":n.data.push({type:"PDFRadioGroup",fieldName:t.name,value:t.checked,checkedIndex:0})}}))}}))})),[n,o]}},658:function(t,e,n){"use strict";var r=n(5),o=n(373);r({target:"String",proto:!0,forced:n(374)("fontsize")},{fontsize:function(t){return o(this,"font","size",t)}})},674:function(t,e){},675:function(t,e){},676:function(t,e){},677:function(t,e){},678:function(t,e){},679:function(t,e){},680:function(t,e){},681:function(t,e){},682:function(t,e){},683:function(t,e){},684:function(t,e){},685:function(t,e){},789:function(t,e,n){"use strict";n.r(e),n.d(e,"formatStyleTop",(function(){return r})),n.d(e,"appendEditElement",(function(){return l})),n.d(e,"appendEditText",(function(){return c})),n.d(e,"appendEditTextInput",(function(){return d})),n.d(e,"scrapPdfData",(function(){return h}));n(370),n(371),n(69),n(23),n(9),n(30);var r=function(t,e){var n=e.substring(e.indexOf(t)+t.length+1,e.indexOf("px"));return Number(n.trim())},o=function(t,e){var n=e.substring(e.indexOf(t)+t.length+1,e.lastIndexOf("px"));return Number(n.trim())},l=function(t,e,n,l,c){t.data.push({page_number:e.indexOf(c),y:r("top",n),x:o("left",n),svgPath:l,type:"Annotation"})},c=function(t,e,n,l,c,d){t.data.push({page_number:e.indexOf(c),y:r("top",n),x:o("left",n),type:"DrawText",text:l,fontSize:r("font-size",d)})},d=function(t,e,n,l,c,d){t.data.push({page_number:e.indexOf(c),y:r("top",n),x:o("left",n),type:"DrawText",text:l,fontSize:r("font-size",d)})},h=function(t){var e={pdf_url:t||"",data:[]},n=document.querySelectorAll(".pdf-single-page-outer"),r=Array.from(n);return r.forEach((function(element){element.children.length>1&&Array.from(element.children).forEach((function(t){t.classList.contains("tool-wrapper")&&Array.from(t.children[1].children).forEach((function(n){switch(n.tagName){case"svg":l(e,r,t.getAttribute("style"),n.children[0].getAttribute("d"),element);break;case"DIV":switch(n.children[0].tagName){case"INPUT":break;case"svg":l(e,r,t.getAttribute("style"),n.children[0].children[0].getAttribute("d"),element);break;case"P":c(e,r,t.getAttribute("style"),n.children[0].textContent,element,n.children[0].getAttribute("style"))}break;default:console.log("it is default"+n.tagName)}}))}))})),e}},846:function(t,e,n){var content=n(1282);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(20).default)("14abb0b2",content,!0,{sourceMap:!1})}}]);